<!-- Layout Topbar con fondo verde y búsqueda a la izquierda -->
<div class="layout-topbar bg-green-500 text-white flex justify-between items-center py-4 px-6">
    <!-- Logo -->
    <a class="layout-topbar-logo flex items-center" routerLink="">
        <img src="assets/img/sus.jpg" alt="logo" class="h-8">
        <span class="ml-2 text-lg font-bold">KiosKos</span>
    </a>

    <!-- Menú y botones -->
    <div class="flex items-center space-x-4">
        <!-- Este botón solo se muestra cuando la ruta es '/administracion' o sus subrutas -->
        <button #menubutton *ngIf="showMenuIcons" class="p-link layout-menu-button" (click)="layoutService.onMenuToggle()">
            <i class="pi pi-bars text-black"></i> <!-- Icono de menú -->
        </button>
    
        <!-- Menú desplegable de perfil -->
        <button #topbarmenubutton *ngIf="showMenuIcons" class="p-link layout-topbar-menu-button" (click)="layoutService.showProfileSidebar()">
            <i class="pi pi-ellipsis-v text-black"></i> <!-- Icono de perfil -->
        </button>
    </div>
      

        <!-- Input de búsqueda (al lado izquierdo, antes de los botones) -->
        <div class="flex items-center space-x-2 ml-4">
            <span class="p-input-icon-left">
                <input
                    type="text"
                    pInputText
                    placeholder="Search"
                    class="p-inputtext p-component p-element"
                    [(ngModel)]="searchTerm"
                    (input)="onSearchChange()"
                />
                <i class="pi pi-search"></i>
            </span>
        </div>

<!-- Menú desplegable de opciones -->
<div #topbarmenu class="layout-topbar-menu" [ngClass]="{'layout-topbar-menu-mobile-active': layoutService.state.profileSidebarVisible}">
  
    <!-- Carrito -->
    <button class="p-link layout-topbar-button relative" [routerLink]="'/market/cart'">
        <i class="pi pi-cart-minus text-black"></i>
        <span *ngIf="cartItemCount > 0" class="badge bg-red-500 text-white absolute top-0 right-0 rounded-full w-6 h-6 flex items-center justify-center text-xs">
        {{ cartItemCount }}
        </span>
    </button>
  
  
  
    <!-- Perfil con submenú -->
    <div class="relative">
        <button class="p-link layout-topbar-button" (click)="toggleSubmenu('perfil')">
        <i class="pi pi-user text-black"></i>
        <span>Perfil</span>
        </button>
    
        <!-- Submenú de perfil (solo con íconos) -->
        <div *ngIf="isSubmenuOpen['perfil']" class="absolute left-0 mt-2 space-y-2 bg-white text-black shadow-lg rounded-lg w-12 z-50">
        <button class="p-link layout-topbar-button w-full py-2  flex items-center justify-center">
            <i class="pi pi-pencil text-xl"></i> <!-- Icono de Editar Perfil -->
        </button>
        <button class="p-link layout-topbar-button w-full py-2 flex items-center justify-center">
            <i class="pi pi-sign-out text-xl"></i> <!-- Icono de Cerrar sesión -->
        </button>
        </div>
    </div>
  
  
    <!-- Configuración con submenú -->
    <div class="relative">
        <button class="p-link layout-topbar-button" (click)="toggleSubmenu('config')">
        <i class="pi pi-cog text-black"></i>
        <span>Configuración</span>
        </button>
    
        <!-- Submenú de configuración (solo con íconos) -->
        <div *ngIf="isSubmenuOpen['config']" class="absolute left-0 mt-2 space-y-2 bg-white text-black shadow-lg rounded-lg w-12 z-50">
        <button class="p-link layout-topbar-button w-full py-2 hover:bg-gray-100 flex items-center justify-center">
            <i class="pi pi-sun text-xl"></i> <!-- Icono de Tema -->
        </button>
        <button class="p-link layout-topbar-button w-full py-2 hover:bg-gray-100 flex items-center justify-center">
            <i class="pi pi-lock text-xl"></i> <!-- Icono de Seguridad -->
        </button>
        </div>
    </div>

  
  </div>
</div>
